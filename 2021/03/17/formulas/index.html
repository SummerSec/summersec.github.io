<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Formulas, 像清水一般清澈透明">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Formulas | 像清水一般清澈透明</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/favicon.png">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/css/my.css">

    <script src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 4.1.1">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="像清水一般清澈透明" type="application/atom+xml">

<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">像清水一般清澈透明</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">像清水一般清澈透明</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    
<script src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/medias/featureimages/21.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Formulas</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                          <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                          </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/codeql/" class="post-category">
                                codeql
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-03-17
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    4.3k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    20 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="Formulas¶公式"><a href="#Formulas¶公式" class="headerlink" title="Formulas¶公式"></a>Formulas<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#formulas" target="_blank" rel="noopener">¶</a>公式</h1><p>Formulas define logical relations between the free variables used in expressions.</p>
<blockquote>
<p>公式定义了表达式中使用的自由变量之间的逻辑关系。</p>
</blockquote>
<p>Depending on the values assigned to those <a href="https://codeql.github.com/docs/ql-language-reference/variables/#free-variables" target="_blank" rel="noopener">free variables</a>, a formula can be true or false. When a formula is true, we often say that the formula <em>holds</em>. For example, the formula <code>x = 4 + 5</code> holds if the value <code>9</code> is assigned to <code>x</code>, but it doesn’t hold for other assignments to <code>x</code>. Some formulas don’t have any free variables. For example <code>1 &lt; 2</code> always holds, and <code>1 &gt; 2</code> never holds.</p>
<blockquote>
<p>根据分配给这些自由变量的值，一个公式可以是真或假。当一个公式为真时，我们经常说这个公式成立。例如，如果给x分配了数值9，则公式x = 4 + 5成立，但对于x的其他分配则不成立。例如，1 &lt; 2 总是成立，而 1 &gt; 2 从不成立。</p>
</blockquote>
<p>You usually use formulas in the bodies of classes, predicates, and select clauses to constrain the set of values that they refer to. For example, you can define a class containing all integers <code>i</code> for which the formula <code>i in [0 .. 9]</code> holds.</p>
<blockquote>
<p>你通常在类、谓词和选择子句的主体中使用公式来限制它们所引用的值集。例如，您可以定义一个包含所有整数 i 的类，其中公式 i 在 [0 … 9] 中成立。</p>
</blockquote>
<p>The following sections describe the kinds of formulas that are available in QL.</p>
<blockquote>
<p>下面的章节描述了QL中可用的公式的种类。</p>
</blockquote>
<h2 id="Comparisons¶比较"><a href="#Comparisons¶比较" class="headerlink" title="Comparisons¶比较"></a>Comparisons<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#comparisons" target="_blank" rel="noopener">¶</a>比较</h2><p>A comparison formula is of the form:</p>
<blockquote>
<p>比较公式的形式是</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;expression&gt; &lt;operator&gt; &lt;expression&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>See the tables below for an overview of the available comparison operators.</p>
<blockquote>
<p>请看下面的表格，了解可用的比较运算符的概况。</p>
</blockquote>
<h3 id="Order运算符"><a href="#Order运算符" class="headerlink" title="Order运算符"></a>Order运算符</h3><p>To compare two expressions using one of these order operators, each expression must have a type and those types must be <a href="https://codeql.github.com/docs/ql-language-reference/types/#type-compatibility" target="_blank" rel="noopener">compatible</a> and <a href="https://codeql.github.com/docs/ql-language-reference/ql-language-specification/#ordering" target="_blank" rel="noopener">orderable</a>.</p>
<blockquote>
<p>要使用这些顺序运算符中的一个来比较两个表达式，每个表达式必须有一个类型，而且这些类型必须是兼容和可排序的。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Symbol</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Greater than</td>
<td align="left"><code>&gt;</code></td>
</tr>
<tr>
<td align="left">Greater than or equal to</td>
<td align="left"><code>&gt;=</code></td>
</tr>
<tr>
<td align="left">Less than</td>
<td align="left"><code>&lt;</code></td>
</tr>
<tr>
<td align="left">Less than or equal to</td>
<td align="left"><code>&lt;=</code></td>
</tr>
</tbody></table>
<p>For example, the formulas <code>"Ann" &lt; "Anne"</code> and <code>5 + 6 &gt;= 11</code> both hold.</p>
<blockquote>
<p>例如，公式 “Ann”&lt;”Anne “和5+6&gt;=11都成立。</p>
</blockquote>
<h3 id="Equality¶平等"><a href="#Equality¶平等" class="headerlink" title="Equality¶平等"></a>Equality<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#equality" target="_blank" rel="noopener">¶</a>平等</h3><p>To compare two expressions using <code>=</code>, at least one of the expressions must have a type. If both expressions have a type, then their types must be <a href="https://codeql.github.com/docs/ql-language-reference/types/#type-compatibility" target="_blank" rel="noopener">compatible</a>.</p>
<blockquote>
<p>要使用=比较两个表达式，至少其中一个表达式必须有一个类型。如果两个表达式都有一个类型，那么它们的类型必须是兼容的。</p>
</blockquote>
<p>To compare two expressions using <code>!=</code>, both expressions must have a type. Those types must also be <a href="https://codeql.github.com/docs/ql-language-reference/types/#type-compatibility" target="_blank" rel="noopener">compatible</a>.</p>
<blockquote>
<p>要使用 != 比较两个表达式，两个表达式必须有一个类型。这些类型也必须是兼容的。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Symbol</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Equal to</td>
<td align="left"><code>=</code></td>
</tr>
<tr>
<td align="left">Not equal to</td>
<td align="left"><code>!=</code></td>
</tr>
</tbody></table>
<p>For example, <code>x.sqrt() = 2</code> holds if <code>x</code> is <code>4</code>, and <code>4 != 5</code> always holds.</p>
<blockquote>
<p>例如，如果 x 是 4，x.sqrt() = 2 成立，而 4 !=5 总是成立。</p>
</blockquote>
<p>For expressions <code>A</code> and <code>B</code>, the formula <code>A = B</code> holds if there is a pair of values—one from <code>A</code> and one from <code>B</code>—that are the same. In other words, <code>A</code> and <code>B</code> have at least one value in common. For example, <code>[1 .. 2] = [2 .. 5]</code> holds, since both expressions have the value <code>2</code>.</p>
<blockquote>
<p>对于表达式 A 和 B，如果有一对值–一个来自 A，一个来自 B–相同，则公式 A = B 成立。换句话说，A和B至少有一个共同的值。例如，[1 … 2]=[2 … 5]成立，因为两个表达式的值都是2。</p>
</blockquote>
<p>As a consequence, <code>A != B</code> has a very different meaning to the <a href="https://codeql.github.com/docs/ql-language-reference/formulas/#negation" target="_blank" rel="noopener">negation</a> <code>not A = B</code> <a href="https://codeql.github.com/docs/ql-language-reference/formulas/#id10" target="_blank" rel="noopener">[1]</a>:</p>
<blockquote>
<p>因此，A !=B与否定式not A = B [1]的意义截然不同: </p>
</blockquote>
<ul>
<li><p><code>A != B</code> holds if there is a pair of values (one from <code>A</code> and one from <code>B</code>) that are different.</p>
<blockquote>
<p>如果有一对不同的值(一个来自A, 一个来自B), 则A != B成立.</p>
</blockquote>
</li>
<li><p><code>not A = B</code> holds if it is <em>not</em> the case that there is a pair of values that are the same. In other words, <code>A</code> and <code>B</code> have no values in common.</p>
<blockquote>
<p>如果不是存在一对数值相同的情况，则not A = B成立。换句话说，A和B没有共同的值。</p>
</blockquote>
</li>
</ul>
<p><strong>Examples</strong></p>
<ol>
<li><ul>
<li><p>If both expressions have a single value (for example <code>1</code> and <code>0</code>), then comparison is straightforward:</p>
<blockquote>
<p>如果两个表达式都只有一个值（例如1和0），那么比较就很直接:</p>
</blockquote>
<p>   <code>1 != 0</code> holds.<code>1 = 0</code> doesn’t hold.<code>not 1 = 0</code> holds.</p>
</li>
</ul>
</li>
<li><ul>
<li><p>Now compare <code>1</code> and <code>[1 .. 2]</code>:</p>
<p>   <code>1 != [1 .. 2]</code> holds, because <code>1 != 2</code>.<code>1 = [1 .. 2]</code> holds, because <code>1 = 1</code>.<code>not 1 = [1 .. 2]</code> doesn’t hold, because there is a common value (<code>1</code>).</p>
</li>
</ul>
</li>
<li><ul>
<li><p>Compare <code>1</code> and <code>none()</code> (the “empty set”):</p>
<p>   <code>1 != none()</code> doesn’t hold, because there are no values in <code>none()</code>, so no values that are not equal to <code>1</code>.<code>1 = none()</code> also doesn’t hold, because there are no values in <code>none()</code>, so no values that are equal to <code>1</code>.<code>not 1 = none()</code> holds, because there are no common values.</p>
</li>
</ul>
</li>
</ol>
<h2 id="Type-checks¶类型检查"><a href="#Type-checks¶类型检查" class="headerlink" title="Type checks¶类型检查"></a>Type checks<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#type-checks" target="_blank" rel="noopener">¶</a>类型检查</h2><p>A type check is a formula that looks like:</p>
<blockquote>
<p>范围检查是一个公式就像:</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;expression&gt; instanceof &lt;type&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>You can use a type check formula to check whether an expression has a certain type. For example, <code>x instanceof Person</code> holds if the variable <code>x</code> has type <code>Person</code>.</p>
<blockquote>
<p>你可以使用类型检查公式来检查一个表达式是否具有某种类型。例如，如果变量x的类型为Person，则x instanceof Person成立。</p>
</blockquote>
<h2 id="Range-checks¶范围检查"><a href="#Range-checks¶范围检查" class="headerlink" title="Range checks¶范围检查"></a>Range checks<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#range-checks" target="_blank" rel="noopener">¶</a>范围检查</h2><p>A range check is a formula that looks like:</p>
<blockquote>
<p>范围检查是一个公式就像:</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;expression&gt; in &lt;range&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>You can use a range check formula to check whether a numeric expression is in a given <a href="https://codeql.github.com/docs/ql-language-reference/expressions/#ranges" target="_blank" rel="noopener">range</a>. For example, <code>x in [2.1 .. 10.5]</code> holds if the variable <code>x</code> is between the values <code>2.1</code> and <code>10.5</code> (including <code>2.1</code> and <code>10.5</code> themselves).</p>
<blockquote>
<p>你可以使用范围检查公式来检查一个数字表达式是否在给定的范围内。例如，x在[2.1 … 10.5]中，如果变量x在值2.1和10.5之间（包括2.1和10.5本身），则该变量成立。</p>
</blockquote>
<p>Note that <code>&lt;expression&gt; in &lt;range&gt;</code> is equivalent to <code>&lt;expression&gt; = &lt;range&gt;</code>. Both formulas check whether the set of values denoted by <code>&lt;expression&gt;</code> is the same as the set of values denoted by <code>&lt;range&gt;</code>.</p>
<blockquote>
<p>注意，<range>中的<expression>相当于<expression>=<range>。两个公式都检查<expression>表示的值集是否与<range>表示的值集相同。</range></expression></range></expression></expression></range></p>
</blockquote>
<h2 id="Calls-to-predicates¶调用谓词"><a href="#Calls-to-predicates¶调用谓词" class="headerlink" title="Calls to predicates¶调用谓词"></a>Calls to predicates<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#calls-to-predicates" target="_blank" rel="noopener">¶</a>调用谓词</h2><p>A call is a formula or <a href="https://codeql.github.com/docs/ql-language-reference/expressions/#expressions" target="_blank" rel="noopener">expression</a> that consists of a reference to a predicate and a number of arguments.</p>
<blockquote>
<p>调用是一个公式或表达式，它由对谓词的引用和一些参数组成。</p>
</blockquote>
<p>For example, <code>isThree(x)</code> might be a call to a predicate that holds if the argument <code>x</code> is <code>3</code>, and <code>x.isEven()</code> might be a call to a member predicate that holds if <code>x</code> is even.</p>
<blockquote>
<p>例如，isThree(x)可能是对一个谓词的调用，如果参数x是3，这个谓词就成立；x.isEven()可能是对一个成员谓词的调用，如果x是偶数，这个谓词就成立。</p>
</blockquote>
<p>A call to a predicate can also contain a closure operator, namely <code>*</code> or <code>+</code>. For example, <code>a.isChildOf+(b)</code> is a call to the <a href="https://codeql.github.com/docs/ql-language-reference/recursion/#transitive-closures" target="_blank" rel="noopener">transitive closure</a> of <code>isChildOf()</code>, so it holds if <code>a</code> is a descendent of <code>b</code>.</p>
<blockquote>
<p>对谓词的调用也可以包含一个闭合操作符，即 * 或 +。例如，a.isChildOf+(b)是对isChildOf()的转义闭包的调用，所以如果a是b的后裔，它就成立。</p>
</blockquote>
<p>The predicate reference must resolve to exactly one predicate. For more information about how a predicate reference is resolved, see “<a href="https://codeql.github.com/docs/ql-language-reference/name-resolution/#name-resolution" target="_blank" rel="noopener">Name resolution</a>.”</p>
<blockquote>
<p>谓词引用必须精确地解析到一个谓词。有关如何解析谓词引用的更多信息，请参阅 “名称解析”。</p>
</blockquote>
<p>If the call resolves to a predicate without result, then the call is a formula.</p>
<blockquote>
<p>如果调用解析到一个没有结果的谓词，那么这个调用就是一个公式。</p>
</blockquote>
<p>It is also possible to call a predicate with result. This kind of call is an expression in QL, instead of a formula. For more information, see “<a href="https://codeql.github.com/docs/ql-language-reference/expressions/#calls-with-result" target="_blank" rel="noopener">Calls to predicates (with result)</a>.”</p>
<blockquote>
<p>也可以调用一个有结果的谓词。这种调用是QL中的表达式，而不是公式。更多信息，请参阅 “对谓词的调用（带结果）”。</p>
</blockquote>
<h2 id="Parenthesized-formulas¶括号公式"><a href="#Parenthesized-formulas¶括号公式" class="headerlink" title="Parenthesized formulas¶括号公式"></a>Parenthesized formulas<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#parenthesized-formulas" target="_blank" rel="noopener">¶</a>括号公式</h2><p>A parenthesized formula is any formula surrounded by parentheses, <code>(</code> and <code>)</code>. This formula has exactly the same meaning as the enclosed formula. The parentheses often help to improve readability and group certain formulas together.</p>
<blockquote>
<p>括号公式是指任何用括号、（和）包围的公式。这个公式与被包围的公式具有完全相同的含义。小括号通常有助于提高可读性，并将某些公式组合在一起。</p>
</blockquote>
<h2 id="Quantified-formulas¶量化公式"><a href="#Quantified-formulas¶量化公式" class="headerlink" title="Quantified formulas¶量化公式"></a>Quantified formulas<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#quantified-formulas" target="_blank" rel="noopener">¶</a>量化公式</h2><p>A quantified formula introduces temporary variables and uses them in formulas in its body. This is a way to create new formulas from existing ones.</p>
<blockquote>
<p>量化公式引入了临时变量，并在其主体的公式中使用它们。这是一种从现有公式创建新公式的方法。</p>
</blockquote>
<h3 id="Explicit-quantifiers¶显示量词"><a href="#Explicit-quantifiers¶显示量词" class="headerlink" title="Explicit quantifiers¶显示量词"></a>Explicit quantifiers<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#explicit-quantifiers" target="_blank" rel="noopener">¶</a>显示量词</h3><p>The following explicit “quantifiers” are the same as the usual existential and universal quantifiers in mathematical logic.</p>
<blockquote>
<p>以下明确的 “量词 “与数理逻辑中常用的存在量词和普遍量词相同。</p>
</blockquote>
<h4 id="exists"><a href="#exists" class="headerlink" title="exists"></a><code>exists</code></h4><p>This quantifier has the following syntax:</p>
<blockquote>
<p>此量词具有以下语法：</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exists(&lt;variable declarations&gt; | &lt;formula&gt;)</span><br></pre></td></tr></tbody></table></figure>

<p>You can also write <code>exists(&lt;variable declarations&gt; | &lt;formula 1&gt; | &lt;formula 2&gt;)</code>. This is equivalent to <code>exists(&lt;variable declarations&gt; | &lt;formula 1&gt; and &lt;formula 2&gt;)</code>.</p>
<blockquote>
<p>你也可以写 exist(&lt;变量声明&gt; | &lt;公式1&gt; | &lt;公式2&gt;)。这相当于 exists(&lt;变量声明&gt; | &lt;公式1&gt; 和 &lt;公式2&gt;)。</p>
</blockquote>
<p>This quantified formula introduces some new variables. It holds if there is at least one set of values that the variables could take to make the formula in the body true.</p>
<blockquote>
<p>这个量化公式引入了一些新的变量。如果至少有一组变量的值可以使正文中的公式为真，它就成立。</p>
</blockquote>
<p>For example, <code>exists(int i | i instanceof OneTwoThree)</code> introduces a temporary variable of type <code>int</code> and holds if any value of that variable has type <code>OneTwoThree</code>.</p>
<blockquote>
<p>例如，exists(int i | i instanceof OneTwoThree)引入了一个类型为int的临时变量，如果该变量的任何值具有OneTwoThree类型，则该变量成立。</p>
</blockquote>
<h4 id="forall"><a href="#forall" class="headerlink" title="forall"></a><code>forall</code></h4><p>This quantifier has the following syntax:</p>
<blockquote>
<p>此量词具有以下语法：</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">forall(&lt;variable declarations&gt; | &lt;formula 1&gt; | &lt;formula 2&gt;)</span><br></pre></td></tr></tbody></table></figure>

<p><code>forall</code> introduces some new variables, and typically has two formulas in its body. It holds if <code>&lt;formula 2&gt;</code> holds for all values that <code>&lt;formula 1&gt;</code> holds for.</p>
<blockquote>
<p>forall 引入了一些新的变量，通常在它的正文中有两个公式。如果&lt;公式2&gt;对&lt;公式1&gt;的所有值都成立，那么它就成立。</p>
</blockquote>
<p>For example, <code>forall(int i | i instanceof OneTwoThree | i &lt; 5)</code> holds if all integers that are in the class <code>OneTwoThree</code> are also less than <code>5</code>. In other words, if there is a value in <code>OneTwoThree</code> that is greater than or equal to <code>5</code>, then the formula doesn’t hold.</p>
<blockquote>
<p>例如，forall(int i | i instanceof OneTwoThree | i &lt; 5) 如果所有在 OneTwoThree 类中的整数也小于 5，则 forall(int i | i instanceof OneTwoThree | i &lt; 5) 成立。换句话说，如果 OneTwoThree 中有一个值大于或等于 5，那么这个公式就不成立。</p>
</blockquote>
<p>Note that <code>forall(&lt;vars&gt; | &lt;formula 1&gt; | &lt;formula 2&gt;)</code> is logically the same as <code>not exists(&lt;vars&gt; | &lt;formula 1&gt; | not &lt;formula 2&gt;)</code>.</p>
<blockquote>
<p>请注意，forall(<vars> | &lt;公式1&gt; | &lt;公式2&gt;)在逻辑上与不存在(<vars> | &lt;公式1&gt; | 不&lt;公式2&gt;)是一样的。</vars></vars></p>
</blockquote>
<h4 id="forex"><a href="#forex" class="headerlink" title="forex"></a><code>forex</code></h4><p>This quantifier has the following syntax:</p>
<blockquote>
<p>此量词具有以下语法：</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">forex(&lt;variable declarations&gt; | &lt;formula 1&gt; | &lt;formula 2&gt;)</span><br></pre></td></tr></tbody></table></figure>

<p>This quantifier exists as a shorthand for:</p>
<blockquote>
<p>这个量化符是作为以下函数的简写而存在:</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">forall(&lt;vars&gt; | &lt;formula 1&gt; | &lt;formula 2&gt;) and</span><br><span class="line">exists(&lt;vars&gt; | &lt;formula 1&gt; | &lt;formula 2&gt;)</span><br></pre></td></tr></tbody></table></figure>

<p>In other words, <code>forex</code> works in a similar way to <code>forall</code>, except that it ensures that there is at least one value for which <code>&lt;formula 1&gt;</code> holds. To see why this is useful, note that the <code>forall</code> quantifier could hold trivially. For example, <code>forall(int i | i = 1 and i = 2 | i = 3)</code> holds: there are no integers <code>i</code> which are equal to both <code>1</code> and <code>2</code>, so the second part of the body <code>(i = 3)</code> holds for every integer for which the first part holds.</p>
<blockquote>
<p>换句话说，forex的工作方式与forall类似，只是它确保至少有一个值的&lt;公式1&gt;成立。要知道为什么这很有用，请注意forall量化符可以琐碎地保持。例如，forall(int i | i = 1 and i = 2 | i = 3)成立：没有整数i既等于1又等于2，所以主体的第二部分(i = 3)对第一部分成立的每个整数都成立。</p>
</blockquote>
<p>Since this is often not the behavior that you want in a query, the <code>forex</code> quantifier is a useful shorthand.</p>
<blockquote>
<p>由于这往往不是你在查询中想要的行为，所以外汇量化符是一个有用的速记符。</p>
</blockquote>
<h3 id="Implicit-quantifiers¶隐式量词"><a href="#Implicit-quantifiers¶隐式量词" class="headerlink" title="Implicit quantifiers¶隐式量词"></a>Implicit quantifiers<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#implicit-quantifiers" target="_blank" rel="noopener">¶</a>隐式量词</h3><p>Implicitly quantified variables can be introduced using “don’t care expressions.” These are used when you need to introduce a variable to use as an argument to a predicate call, but don’t care about its value. For further information, see “<a href="https://codeql.github.com/docs/ql-language-reference/expressions/#don-t-care-expressions" target="_blank" rel="noopener">Don’t-care expressions</a>.”</p>
<blockquote>
<p>可以使用 “不在乎表达式 “引入隐式量词的变量。当您需要引入一个变量作为谓词调用的参数，但不关心它的值时，就会使用这些变量。有关更多信息，请参阅 “不在乎表达式”。</p>
</blockquote>
<h2 id="Logical-connectives¶逻辑连接词"><a href="#Logical-connectives¶逻辑连接词" class="headerlink" title="Logical connectives¶逻辑连接词"></a>Logical connectives<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#logical-connectives" target="_blank" rel="noopener">¶</a>逻辑连接词</h2><p>You can use a number of logical connectives between formulas in QL. They allow you to combine existing formulas into longer, more complex ones.</p>
<blockquote>
<p>在QL中，您可以在公式之间使用一些逻辑连接。它们允许您将现有的公式组合成更长、更复杂的公式。</p>
</blockquote>
<p>To indicate which parts of the formula should take precedence, you can use parentheses. Otherwise, the order of precedence from highest to lowest is as follows:</p>
<blockquote>
<p>为了指示公式的哪些部分应该优先，您可以使用括号。否则，从高到低的优先顺序如下:</p>
</blockquote>
<ol>
<li>Negation (<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#negation" target="_blank" rel="noopener">not</a>)</li>
<li>Conditional formula (<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#conditional" target="_blank" rel="noopener">if … then … else</a>)</li>
<li>Conjunction (<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#conjunction" target="_blank" rel="noopener">and</a>)</li>
<li>Disjunction (<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#disjunction" target="_blank" rel="noopener">or</a>)</li>
<li>Implication (<a href="https://codeql.github.com/docs/ql-language-reference/formulas/#implication" target="_blank" rel="noopener">implies</a>)</li>
</ol>
<p>For example, <code>A and B implies C or D</code> is equivalent to <code>(A and B) implies (C or D)</code>.</p>
<blockquote>
<p>例如，A和B意味着C或D相当于（A and B）意味着（C or D）。</p>
</blockquote>
<p>Similarly, <code>A and not if B then C else D</code> is equivalent to <code>A and (not (if B then C else D))</code>.</p>
<blockquote>
<p>  同理，A and not if B then C else D等同于A and (not (if B then C else D))。</p>
</blockquote>
<p>Note that the <a href="https://codeql.github.com/docs/ql-language-reference/formulas/#parenthesized-formulas" target="_blank" rel="noopener">parentheses</a> in the above examples are not necessary, since they highlight the default precedence. You usually only add parentheses to override the default precedence, but you can also add them to make your code easier to read (even if they aren’t required).</p>
<blockquote>
<p>请注意，上述例子中的括号不是必须的，因为它们突出了默认的优先级。您通常只添加括号来覆盖默认的优先级，但您也可以添加括号来使您的代码更容易阅读（即使它们不是必需的）。</p>
</blockquote>
<p>The logical connectives in QL work similarly to Boolean connectives in other programming languages. Here is a brief overview:</p>
<blockquote>
<p>QL中的逻辑连接符的工作原理与其他编程语言中的布尔连接符类似。下面是一个简单的概述:</p>
</blockquote>
<h3 id="not"><a href="#not" class="headerlink" title="not"></a><code>not</code></h3><p>You can use the keyword <code>not</code> before a formula. The resulting formula is called a negation.</p>
<p><code>not A</code> holds exactly when <code>A</code> doesn’t hold.</p>
<blockquote>
<p>你可以在公式前使用关键字not。由此产生的公式称为否定式。</p>
</blockquote>
<p><strong>Example</strong></p>
<p>The following query selects files that are not HTML files.</p>
<blockquote>
<p>下面的查询选择非HTML文件的文件。    </p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from File f</span><br><span class="line">where not f.getFileType().isHtml()</span><br><span class="line">select f</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>Note</p>
<p>You should be careful when using <code>not</code> in a recursive definition, as this could lead to non-monotonic recursion. For more information, “<a href="https://codeql.github.com/docs/ql-language-reference/recursion/#non-monotonic-recursion" target="_blank" rel="noopener">Non-monotonic recursion</a>.”</p>
<p>在递归定义中使用not时应该小心，因为这可能导致非单调递归。更多信息，”非单调递归”。</p>
</blockquote>
<h3 id="if-then-else"><a href="#if-then-else" class="headerlink" title="if ... then ... else"></a><code>if ... then ... else</code></h3><p>You can use these keywords to write a conditional formula. This is another way to simplify notation: <code>if A then B else C</code> is the same as writing <code>(A and B) or ((not A) and C)</code>.</p>
<blockquote>
<p> 你可以用这些关键字来写一个条件公式。这是另一种简化符号的方法：如果 A 那么 B else C 与写 (A and  B) or ((not A) and C) 是一样的。</p>
</blockquote>
<p><strong>Example</strong></p>
<p>With the following definition, <code>visibility(c)</code> returns <code>"public"</code> if <code>x</code> is a public class and returns <code>"private"</code> otherwise:</p>
<blockquote>
<p>通过下面的定义，如果x是一个公共类，则visibility(c)返回 “public”，否则返回 “private”:</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">string visibility(Class c){</span><br><span class="line">  if c.isPublic()</span><br><span class="line">  then result = "public"</span><br><span class="line">  else result = "private"</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="and"><a href="#and" class="headerlink" title="and"></a><code>and</code></h3><p>You can use the keyword <code>and</code> between two formulas. The resulting formula is called a conjunction.</p>
<p><code>A and B</code> holds if, and only if, both <code>A</code> and <code>B</code> hold.</p>
<blockquote>
<p>你可以在两个公式之间使用关键字和。由此产生的公式称为连词。</p>
</blockquote>
<p><strong>Example</strong></p>
<p>The following query selects files that have the <code>js</code> extension and contain fewer than 200 lines of code:</p>
<blockquote>
<p>下面的查询选择了以js为扩展名且包含少于200行代码的文件:</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from File f</span><br><span class="line">where f.getExtension() = "js" and</span><br><span class="line">  f.getNumberOfLinesOfCode() &lt; 200</span><br><span class="line">select f</span><br></pre></td></tr></tbody></table></figure>



<h3 id="or"><a href="#or" class="headerlink" title="or"></a><code>or</code></h3><p>You can use the keyword <code>or</code> between two formulas. The resulting formula is called a disjunction.</p>
<blockquote>
<p>可以在两个公式之间使用关键字或。由此产生的公式称为析取。</p>
</blockquote>
<p><code>A or B</code> holds if at least one of <code>A</code> or <code>B</code> holds.</p>
<blockquote>
<p>如果 A 或 B 中至少有一个成立，则 A 或 B 成立。</p>
</blockquote>
<p><strong>Example</strong></p>
<p>With the following definition, an integer is in the class <code>OneTwoThree</code> if it is equal to <code>1</code>, <code>2</code>, or <code>3</code>:</p>
<blockquote>
<p>在下面的定义中，如果整数等于 1、2 或 3，则该整数属于 OneTwoThree 类：</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class OneTwoThree extends int {</span><br><span class="line">  OneTwoThree() {</span><br><span class="line">    this = 1 or this = 2 or this = 3</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="implies"><a href="#implies" class="headerlink" title="implies"></a><code>implies</code></h3><p>You can use the keyword <code>implies</code> between two formulas. The resulting formula is called an implication. This is just a simplified notation: <code>A implies B</code> is the same as writing <code>(not A) or B</code>.</p>
<blockquote>
<p>你可以在两个公式之间使用关键字 implies。由此产生的公式称为内涵式。这只是一个简化的符号。A暗示B和写（不是A）或B是一样的。</p>
</blockquote>
<p><strong>Example</strong></p>
<p>The following query selects any <code>SmallInt</code> that is odd, or a multiple of <code>4</code>.</p>
<blockquote>
<p>下面的查询选择了任何一个奇数或4的倍数的SmallInt。</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class SmallInt extends int {</span><br><span class="line">  SmallInt() { this = [1 .. 10] }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">from SmallInt x</span><br><span class="line">where x % 2 = 0 implies x % 4 = 0</span><br><span class="line">select x</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://gitee.com/samny/images/raw/master/38u19er38ec/38u19er38ec.png" alt="image-20210317181938737"></p>
<p>Footnotes</p>
<table>
<thead>
<tr>
<th><a href="https://codeql.github.com/docs/ql-language-reference/formulas/#id3" target="_blank" rel="noopener">[1]</a></th>
<th>The difference between <code>A != B</code> and <code>not A = B</code> is due to the underlying quantifiers. If you think of <code>A</code> and <code>B</code> as sets of values, then <code>A != B</code> means:</th>
</tr>
</thead>
<tbody><tr>
<td>[1]</td>
<td>A != B和不是A = B之间的区别是由于底层的量词。如果你把A和B看作是值的集合，那么A != B的意思是。</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exists( a, b | a in A and b in B | a != b )</span><br></pre></td></tr></tbody></table></figure>

<p>On the other hand, <code>not A = B</code> means:</p>
<blockquote>
<p>另一方面，不存在A=B意味着:</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">not exists( a, b | a in A and b in B | a = b )</span><br></pre></td></tr></tbody></table></figure>

<p>This is equivalent to <code>forall( a, b | a in A and b in B | a != b )</code>, which is very different from the first formula.</p>
<blockquote>
<p>这相当于forall( a, b | a in A and b in B | a != b )，这与第一个公式有很大不同。</p>
</blockquote>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">SummerSec</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://summersec.github.io/2021/03/17/Formulas/">https://summersec.github.io/2021/03/17/Formulas/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">SummerSec</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/03/21/Shiro-550%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/medias/featureimages/6.jpg" class="responsive-img" alt="Shiro-550反序列化漏洞分析">
                        
                        <span class="card-title">Shiro-550反序列化漏洞分析</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-03-21
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/" class="post-category">
                                    代码审计
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Java-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/">
                        <span class="chip bg-color">Java 反序列化</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/03/16/Expressions/">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/medias/featureimages/0.jpg" class="responsive-img" alt="Expression">
                        
                        <span class="card-title">Expression</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-03-16
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/codeql/" class="post-category">
                                    codeql
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='true'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.5'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2018-2021</span>
            
            <span id="year">2018</span>
            <a href="/about" target="_blank">SummerSec</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">112k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2018";
                    var startMonth = "6";
                    var startDate = "28";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/SummerSec" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:summersec@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>





    <a href="https://twitter.com/SecSummers" class="tooltipped" target="_blank" data-tooltip="关注我的Twitter: https://twitter.com/SecSummers" data-position="top" data-delay="50">
        <i class="fab fa-twitter"></i>
    </a>









    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="https://cdn.jsdelivr.net/gh/SummerSec/SummerSec.github.io/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
